<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SMS Analysis - SMS Shield</title>
  <link rel="stylesheet" href="enhanced-design.css">
  <link rel="stylesheet" href="mobile-enhancements.css">
  <link rel="stylesheet" href="all.min.css">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <style>
    .auth-link {
      background: var(--gradient-primary);
      padding: 0.5rem 1rem;
      border-radius: var(--radius-lg);
      color: white !important;
      font-weight: 600;
      transition: all var(--transition-normal);
    }
    
    .auth-link:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }
  </style>
</head>
<body>
  <!-- Enhanced Theme Toggle -->
  <button class="theme-toggle-enhanced" onclick="toggleTheme()" aria-label="Toggle theme">
    üåô
  </button>

  <!-- Enhanced Header -->
  <header class="enhanced-header">
    <div class="header-content">
      <div class="logo-section">
        <div class="logo-icon">üõ°Ô∏è</div>
        <a href="index.html" class="logo-text">SMS Shield</a>
      </div>
      
      <nav class="enhanced-nav">
        <a href="index.html" class="nav-link">Home</a>
        <a href="detect.html" class="nav-link active">Detect</a>
        <a href="dashboard.html" class="nav-link">Dashboard</a>
        <a href="profile.html" class="nav-link">Profile</a>
        <a href="about.html" class="nav-link">About</a>
        <a href="contact.html" class="nav-link">Contact</a>
                    <a href="#" class="nav-link auth-link">Detect</a>
      </nav>

      <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle mobile menu">
        ‚ò∞
      </button>
    </div>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="mobile-menu">
      <div class="mobile-menu-links">
        <a href="index.html" class="nav-link">üè† Home</a>
        <a href="detect.html" class="nav-link">üîç Detect SMS</a>
        <a href="dashboard.html" class="nav-link">üìä Dashboard</a>
        <a href="profile.html" class="nav-link">üë§ Profile</a>
        <a href="about.html" class="nav-link">‚ÑπÔ∏è About</a>
        <a href="contact.html" class="nav-link">üìû Contact</a>
                  <a href="#" class="nav-link">üîç Detect</a>
      </div>
    </div>
  </header>

  <!-- Enhanced Hero Section -->
  <section class="enhanced-hero animate-slide-up" style="padding-top: 120px;">
    <h1 class="hero-title">üîç SMS Phishing Detection</h1>
    <p class="hero-subtitle">
      Advanced AI-powered analysis that detects phishing attempts, scams, and malicious content 
      in your SMS messages with industry-leading accuracy.
    </p>
  </section>

  <!-- Enhanced Analysis Form -->
  <section style="padding: 2rem 1.5rem; max-width: 900px; margin: 0 auto;">
    <div class="card-enhanced animate-slide-up" style="padding: 2.5rem;">
      <div style="text-align: center; margin-bottom: 2rem;">
        <div class="card-icon" style="margin: 0 auto 1rem;">üì±</div>
        <h2 style="font-size: 2rem; margin-bottom: 1rem;">Analyze Your SMS Message</h2>
        <p style="opacity: 0.9; font-size: 1.1rem;">
          Paste your SMS message below and get instant AI-powered analysis with detailed threat assessment.
        </p>
      </div>

      <form id="smsForm" style="margin-top: 2rem;">
        <div class="form-group">
          <label for="smsInput" class="form-label">
            <i class="fas fa-message"></i>
            SMS Message
          </label>
          <textarea 
            id="smsInput" 
            class="form-input" 
            placeholder="Paste your SMS message here... Example: URGENT: Your bank account has been suspended. Click here to verify: http://fake-bank.com/verify"
            rows="6"
            required
          ></textarea>
        </div>

        <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-top: 2rem;">
          <button type="submit" id="analyzeBtn" class="btn-enhanced btn-primary">
            <span id="btnText">
              <i class="fas fa-shield-alt"></i>
              Analyze SMS
            </span>
          </button>
          <button type="button" onclick="clearForm()" class="btn-enhanced btn-secondary">
            <i class="fas fa-eraser"></i>
            Clear
          </button>
        </div>
      </form>
    </div>

    <!-- Enhanced Results Section -->
    <div id="resultsSection" style="display: none; margin-top: 2rem;">
      <div class="card-enhanced animate-slide-up">
        <div style="text-align: center; margin-bottom: 2rem;">
          <h3 style="font-size: 1.8rem; margin-bottom: 1rem;">Analysis Results</h3>
          <div id="riskIndicator" style="display: inline-block; padding: 0.5rem 1.5rem; border-radius: 2rem; font-weight: 600; margin-bottom: 1rem;"></div>
        </div>

        <div id="analysisResults" style="text-align: left;"></div>

        <div style="margin-top: 2rem; text-align: center;">
          <button onclick="shareResults()" class="btn-enhanced btn-secondary" style="margin-right: 1rem;">
            <i class="fas fa-share"></i>
            Share Results
          </button>
          <button onclick="saveToHistory()" class="btn-enhanced btn-primary">
            <i class="fas fa-save"></i>
            Save to History
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Enhanced Footer -->
  <footer class="enhanced-footer">
    <div style="max-width: 1200px; margin: 0 auto;">
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
        <div>
          <h4 style="margin-bottom: 1rem; color: white;">SMS Shield</h4>
          <p style="opacity: 0.8; line-height: 1.6;">
            Advanced AI-powered SMS phishing detection to keep you safe from scams and malicious messages.
          </p>
        </div>
        <div>
          <h4 style="margin-bottom: 1rem; color: white;">Quick Links</h4>
          <div style="display: flex; flex-direction: column; gap: 0.5rem;">
            <a href="detect.html" style="color: rgba(255, 255, 255, 0.8); text-decoration: none; transition: color 0.3s;">SMS Detection</a>
            <a href="dashboard.html" style="color: rgba(255, 255, 255, 0.8); text-decoration: none; transition: color 0.3s;">Dashboard</a>
            <a href="about.html" style="color: rgba(255, 255, 255, 0.8); text-decoration: none; transition: color 0.3s;">About Us</a>
            <a href="contact.html" style="color: rgba(255, 255, 255, 0.8); text-decoration: none; transition: color 0.3s;">Contact</a>
          </div>
        </div>
        <div>
          <h4 style="margin-bottom: 1rem; color: white;">Connect</h4>
          <div style="display: flex; gap: 1rem;">
            <a href="#" style="color: rgba(255, 255, 255, 0.8); font-size: 1.5rem; transition: color 0.3s;">
              <i class="fab fa-twitter"></i>
            </a>
            <a href="#" style="color: rgba(255, 255, 255, 0.8); font-size: 1.5rem; transition: color 0.3s;">
              <i class="fab fa-linkedin"></i>
            </a>
            <a href="#" style="color: rgba(255, 255, 255, 0.8); font-size: 1.5rem; transition: color 0.3s;">
              <i class="fab fa-github"></i>
            </a>
          </div>
        </div>
      </div>
      <div style="text-align: center; padding-top: 2rem; border-top: 1px solid rgba(255, 255, 255, 0.1); opacity: 0.8;">
        <p>&copy; 2024 SMS Shield. Built with ‚ù§Ô∏è for digital security.</p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="firebase-fixed.js"></script>
  <script src="notification-system.js"></script>
  <script src="chatbot-ml-model.js"></script>
  <script src="chatbot-system.js"></script>
  <script src="navigation-fix.js"></script>
  <script>
    // Authentication state management
    let currentUser = null;
    
    auth.onAuthStateChanged((user) => {
      currentUser = user;
      updateAuthUI();
    });
    
    function updateAuthUI() {
      const authLink = document.querySelector('.auth-link');
      if (authLink) {
        authLink.textContent = 'Detect';
        authLink.href = '#';
      }
    }
    
    // Form functions
    function clearForm() {
      document.getElementById('smsInput').value = '';
      document.getElementById('resultsSection').style.display = 'none';
      showSuccess('Form cleared successfully', 'Form Reset');
    }

    function shareResults() {
      showInfo('Share functionality coming soon!', 'Share Feature');
    }

    function saveToHistory() {
      showInfo('Save to history functionality coming soon!', 'Save Feature');
    }

    // Enhanced SMS analysis with notifications
    function performAnalysis() {
      const smsInput = document.getElementById('smsInput');
      const smsContent = smsInput.value.trim();
      
      if (!smsContent) {
        showError('Please enter an SMS message to analyze', 'Input Required');
        smsInput.focus();
        return;
      }
      
      // Show analysis started notification
      showInfo('Analyzing SMS message...', 'ü§ñ AI Analysis');
      
      // Simulate analysis delay
      setTimeout(() => {
        // Simple analysis for testing
        const isPhishing = smsContent.toLowerCase().includes('urgent') || 
                          smsContent.toLowerCase().includes('verify') ||
                          smsContent.toLowerCase().includes('click here');
        
        const analysis = {
          score: isPhishing ? 85 : 15,
          isPhishing: isPhishing,
          confidence: isPhishing ? 90 : 70,
          riskLevel: isPhishing ? 'High' : 'Low',
          indicators: isPhishing ? ['Suspicious keywords detected', 'Urgency indicators found'] : ['No threats detected'],
          recommendations: isPhishing ? ['Do not click any links', 'Delete this message'] : ['Message appears safe'],
          analysisTime: 1000
        };
        
        // Show analysis result notification
        if (analysis.isPhishing) {
          showWarning(
            `Phishing detected! Score: ${analysis.score}/100. ${analysis.recommendations.join(' ')}`,
            'üö® Phishing Alert'
          );
        } else {
          showSuccess(
            `Message appears safe. Score: ${analysis.score}/100`,
            '‚úÖ Safe Message'
          );
        }
        
        displayResults(analysis);
      }, 1500);
    }

    function displayResults(analysis) {
      const resultsSection = document.getElementById('resultsSection');
      const riskIndicator = document.getElementById('riskIndicator');
      const analysisResults = document.getElementById('analysisResults');
      
      // Set risk indicator
      if (analysis.isPhishing) {
        riskIndicator.style.background = 'linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)';
        riskIndicator.textContent = 'üö® PHISHING DETECTED';
      } else {
        riskIndicator.style.background = 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)';
        riskIndicator.textContent = '‚úÖ SAFE MESSAGE';
      }
      
      // Display results
      analysisResults.innerHTML = `
        <div style="margin-bottom: 1.5rem;">
          <h4 style="margin-bottom: 0.5rem;">üìä Analysis Summary</h4>
          <p><strong>Threat Score:</strong> ${analysis.score}/100</p>
          <p><strong>Confidence:</strong> ${analysis.confidence}%</p>
          <p><strong>Risk Level:</strong> ${analysis.riskLevel}</p>
          <p><strong>Analysis Time:</strong> ${analysis.analysisTime}ms</p>
        </div>
        
        <div style="margin-bottom: 1.5rem;">
          <h4 style="margin-bottom: 0.5rem;">üîç Key Indicators</h4>
          <ul style="list-style: none; padding: 0;">
            ${analysis.indicators.map(indicator => `<li style="margin-bottom: 0.5rem;">‚Ä¢ ${indicator}</li>`).join('')}
          </ul>
        </div>
        
        <div style="margin-bottom: 1.5rem;">
          <h4 style="margin-bottom: 0.5rem;">üí° Recommendations</h4>
          <ul style="list-style: none; padding: 0;">
            ${analysis.recommendations.map(rec => `<li style="margin-bottom: 0.5rem;">‚Ä¢ ${rec}</li>`).join('')}
          </ul>
        </div>
      `;
      
      resultsSection.style.display = 'block';
      resultsSection.scrollIntoView({ behavior: 'smooth' });
    }

    // Form submission
    document.getElementById('smsForm').addEventListener('submit', function(e) {
      e.preventDefault();
      performAnalysis();
    });

    // Test notifications on page load
    document.addEventListener('DOMContentLoaded', function() {
      // Show welcome notification
      setTimeout(() => {
        showInfo('Welcome to SMS Shield! Ready to analyze your messages.', 'üõ°Ô∏è SMS Shield');
      }, 1000);
    });
  </script>
</body>
</html>
